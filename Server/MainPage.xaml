<?xml version="1.0" encoding="utf-8" ?>
<Page
    x:Class="IPC_Demo.MainPage"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    xmlns:ctrl="using:IPC_Demo.Controls"
    xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
    xmlns:local="using:IPC_Demo"
    xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
    mc:Ignorable="d">

    <Grid x:Name="root" Margin="10" BorderThickness="0">

        <!--#region [Watermark]-->
        <Image
            Margin="50"
            HorizontalAlignment="Stretch"
            VerticalAlignment="Stretch"
            Opacity="0.1"
            Source="/Assets/Background14.png"
            Stretch="Uniform" />
        <!--#endregion-->

        <!--#region LED signal-->
        <Grid
            x:Name="gridLED"
            Width="50"
            Height="50"
            Margin="0,0,18,0"
            HorizontalAlignment="Right"
            VerticalAlignment="Top">
            <!--
                NOTE: For 'Image' controls the 'CompositeMode=MinBlend' will result in a
                more subtle effect, but is not as pronounced as 'CompositeMode=SourceOver'.
            -->
            <Image
                x:Name="imgLED_off"
                Width="50"
                Opacity="1"
                Source="/Assets/LED8_off.png"
                Stretch="Uniform"
                Visibility="Visible" />
            <ctrl:CompShadow
                x:Name="comp_on"
                BlurRadius="8"
                OffsetX="0"
                OffsetY="0"
                ShadowOpacity="0.8"
                Visibility="Collapsed"
                Color="#00F000">
                <Image
                    x:Name="imgLED_on"
                    Width="50"
                    Opacity="1"
                    Source="/Assets/LED8_on.png"
                    Stretch="Uniform"
                    Visibility="Visible" />
            </ctrl:CompShadow>
            <ctrl:CompShadow
                x:Name="comp_err"
                BlurRadius="8"
                OffsetX="0"
                OffsetY="0"
                ShadowOpacity="0.8"
                Visibility="Collapsed"
                Color="#F00000">
                <Image
                    x:Name="imgLED_err"
                    Width="50"
                    Opacity="1"
                    Source="/Assets/LED8_err.png"
                    Stretch="Uniform"
                    Visibility="Visible" />
            </ctrl:CompShadow>
        </Grid>
        <!--#endregion-->

        <ProgressRing
            Width="100"
            Height="100"
            Margin="0,-50,0,0"
            HorizontalAlignment="Center"
            VerticalAlignment="Center"
            Background="Transparent"
            BorderThickness="0"
            Foreground="{StaticResource RingColor}"
            IsActive="True"
            Visibility="{x:Bind IsBusy, Mode=OneWay, Converter={StaticResource BooleanVisibility}, ConverterParameter=False}">
            <ProgressRing.RenderTransform>
                <ScaleTransform CenterX="0.5" CenterY="0.5" ScaleX="1" ScaleY="1" />
            </ProgressRing.RenderTransform>
        </ProgressRing>

        <!--#region [IPC using TabView]-->
        <TabView
            HorizontalAlignment="Stretch"
            VerticalAlignment="Stretch"
            AllowDropTabs="False"
            Background="Transparent"
            BorderBrush="{ThemeResource GradientHeaderBrush}"
            BorderThickness="0"
            CanDragTabs="False"
            CanReorderTabs="False"
            CornerRadius="5"
            IsAddTabButtonVisible="False"
            PointerMoved="UIElement_PointerMoved"
            PointerPressed="UIElement_PointerPressed"
            PointerReleased="UIElement_PointerReleased">
            <TabView.Resources>
                <Thickness x:Key="TabViewButtonBorderThickness">1</Thickness>
                <SolidColorBrush x:Key="TabViewItemHeaderBackgroundPointerOver" Color="#3F5FB2F2" />
                <SolidColorBrush x:Key="TabViewItemHeaderBackgroundPressed" Color="#5F5FB2F2" />
                <SolidColorBrush x:Key="TabViewItemHeaderBackgroundDisabled" Color="DimGray" />
                <SolidColorBrush x:Key="TabViewItemBackgroundPointerOver" Color="#3F5FB2F2" />
                <SolidColorBrush x:Key="TabViewSelectedItemBorderBrush" Color="#1F5FB2F2" />
                <SolidColorBrush x:Key="TabViewButtonBackgroundActiveTab" Color="#3F5FB2F2" />
                <SolidColorBrush x:Key="TabViewItemHeaderBackground" Color="#1F5FB2F2" />
                <!--<SolidColorBrush x:Key="TabViewItemHeaderBackgroundSelected" Color="#3F5FB2F2" />-->
                <LinearGradientBrush x:Key="TabViewItemHeaderBackgroundSelected" StartPoint="0,0" EndPoint="0,1">
                    <LinearGradientBrush.GradientStops>
                        <GradientStop Offset="0.0" Color="#93BEC4" />
                        <GradientStop Offset="0.2" Color="#1C5C82" />
                        <GradientStop Offset="1.0" Color="#0D2A44" />
                    </LinearGradientBrush.GradientStops>
                </LinearGradientBrush>
            </TabView.Resources>
            <TabView.TabStripHeader>
                <Grid x:Name="HeaderInset" Background="Transparent">
                    <Image
                        x:Name="imgHeader"
                        Height="24"
                        Margin="0,12,0,0"
                        VerticalAlignment="Top"
                        Source="/Assets/MessageIcon.png"
                        Stretch="UniformToFill" />
                </Grid>
            </TabView.TabStripHeader>
            <TabView.TabStripFooter>
                <Grid MinWidth="200" Background="Transparent">
                    <TextBlock
                        x:Name="tsf"
                        Margin="10,4,0,0"
                        VerticalAlignment="Center"
                        FontSize="{StaticResource FontSizeSmall}"
                        Text="Status" />
                </Grid>
            </TabView.TabStripFooter>
            <!--  1st Tab  -->
            <TabViewItem
                x:Name="tvi1"
                Header="Available"
                IsClosable="False">
                <TabViewItem.IconSource>
                    <FontIconSource Glyph="{StaticResource AllApps}" />
                </TabViewItem.IconSource>
                <ScrollViewer VerticalScrollMode="Auto">
                    <Grid>
                        <Grid.RowDefinitions>
                            <RowDefinition Height="Auto" />
                            <RowDefinition Height="*" />
                        </Grid.RowDefinitions>
                        <TextBlock
                            Grid.Row="0"
                            Margin="16,13"
                            FontSize="{StaticResource FontSizeLarge}"
                            Text="Messages" />
                        <ListView
                            x:Name="lvTab1Messages"
                            Grid.Row="1"
                            Margin="0,0,10,0"
                            HorizontalAlignment="Stretch"
                            VerticalAlignment="Stretch"
                            Background="Transparent"
                            Opacity="1">
                            <!--
                            <ListView.ItemsPanel>
                                <ItemsPanelTemplate>
                                    <WrapGrid HorizontalChildrenAlignment="Left" Orientation="Horizontal" />
                                </ItemsPanelTemplate>
                            </ListView.ItemsPanel>
                            -->
                            <ListView.Transitions>
                                <TransitionCollection>
                                    <EdgeUIThemeTransition />
                                </TransitionCollection>
                            </ListView.Transitions>
                            <ListView.ItemTemplate>
                                <DataTemplate x:DataType="local:ApplicationMessage">
                                    <Grid
                                        Margin="0,3,0,3"
                                        PointerMoved="UIElement_PointerMoved"
                                        PointerPressed="UIElement_PointerPressed"
                                        PointerReleased="UIElement_PointerReleased">
                                        <Grid.RowDefinitions>
                                            <RowDefinition />
                                            <RowDefinition />
                                        </Grid.RowDefinitions>
                                        <Grid Grid.Row="0">
                                            <Grid.ColumnDefinitions>
                                                <ColumnDefinition Width="Auto" />
                                                <ColumnDefinition Width="*" />
                                            </Grid.ColumnDefinitions>
                                            <ctrl:CompShadow
                                                Grid.Column="0"
                                                Margin="2,2,4,2"
                                                HorizontalAlignment="Left"
                                                VerticalAlignment="Center"
                                                BlurRadius="1"
                                                OffsetX="1"
                                                OffsetY="1"
                                                ShadowOpacity="0.9"
                                                Color="{StaticResource TitleShadow}">
                                                <TextBlock
                                                    FontSize="{StaticResource FontSizeMedium}"
                                                    Foreground="{StaticResource PrimaryBrush}"
                                                    Text="{x:Bind Module, Mode=OneWay}"
                                                    TextWrapping="NoWrap" />
                                            </ctrl:CompShadow>
                                            <TextBlock
                                                Grid.Column="1"
                                                Margin="4,2,2,2"
                                                HorizontalAlignment="Right"
                                                VerticalAlignment="Center"
                                                FontSize="{StaticResource FontSizeNormal}"
                                                Foreground="{StaticResource HeaderBrush}"
                                                Text="{x:Bind MessageTime, Mode=OneWay, Converter={StaticResource StringToFormat}, ConverterParameter='{}{0:ddd, dd MMM yyyy – hh:mm:ss tt}'}"
                                                TextWrapping="NoWrap" />
                                        </Grid>
                                        <TextBlock
                                            Grid.Row="1"
                                            Margin="2"
                                            HorizontalAlignment="Left"
                                            VerticalAlignment="Center"
                                            FontSize="{StaticResource FontSizeNormal}"
                                            Foreground="{StaticResource SecondaryBrush}"
                                            Text="{x:Bind MessageText, Mode=OneWay}"
                                            TextWrapping="Wrap" />
                                    </Grid>
                                </DataTemplate>
                            </ListView.ItemTemplate>
                        </ListView>
                    </Grid>
                </ScrollViewer>
            </TabViewItem>
            <!--  2nd Tab  -->
            <TabViewItem
                x:Name="tvi2"
                Header="Available"
                IsClosable="False">
                <TabViewItem.IconSource>
                    <FontIconSource Glyph="{StaticResource AllApps}" />
                </TabViewItem.IconSource>
                <ScrollViewer VerticalScrollMode="Auto">
                    <Grid>
                        <Grid.RowDefinitions>
                            <RowDefinition Height="Auto" />
                            <RowDefinition Height="*" />
                        </Grid.RowDefinitions>
                        <TextBlock
                            Grid.Row="0"
                            Margin="16,13"
                            FontSize="{StaticResource FontSizeLarge}"
                            Text="Disallowed Sender" />
                        <ListView
                            x:Name="lvTab2Messages"
                            Grid.Row="1"
                            Margin="0,0,10,0"
                            HorizontalAlignment="Stretch"
                            VerticalAlignment="Stretch"
                            Background="Transparent"
                            Opacity="1">
                            <!--
                            <ListView.ItemsPanel>
                                <ItemsPanelTemplate>
                                    <WrapGrid HorizontalChildrenAlignment="Left" Orientation="Horizontal" />
                                </ItemsPanelTemplate>
                            </ListView.ItemsPanel>
                            -->
                            <ListView.Transitions>
                                <TransitionCollection>
                                    <EdgeUIThemeTransition />
                                </TransitionCollection>
                            </ListView.Transitions>
                            <ListView.ItemTemplate>
                                <DataTemplate x:DataType="local:ApplicationMessage">
                                    <Grid
                                        Margin="0,3,0,3"
                                        PointerMoved="UIElement_PointerMoved"
                                        PointerPressed="UIElement_PointerPressed"
                                        PointerReleased="UIElement_PointerReleased">
                                        <Grid.RowDefinitions>
                                            <RowDefinition />
                                            <RowDefinition />
                                        </Grid.RowDefinitions>
                                        <Grid Grid.Row="0">
                                            <Grid.ColumnDefinitions>
                                                <ColumnDefinition Width="Auto" />
                                                <ColumnDefinition Width="*" />
                                            </Grid.ColumnDefinitions>
                                            <ctrl:CompShadow
                                                Grid.Column="0"
                                                Margin="2,2,4,2"
                                                HorizontalAlignment="Left"
                                                VerticalAlignment="Center"
                                                BlurRadius="1"
                                                OffsetX="1"
                                                OffsetY="1"
                                                ShadowOpacity="0.9"
                                                Color="{StaticResource TitleShadow}">
                                                <TextBlock
                                                    FontSize="{StaticResource FontSizeMedium}"
                                                    Foreground="{StaticResource PrimaryBrush}"
                                                    Text="{x:Bind Module, Mode=OneWay}"
                                                    TextWrapping="NoWrap" />
                                            </ctrl:CompShadow>
                                            <TextBlock
                                                Grid.Column="1"
                                                Margin="4,2,2,2"
                                                HorizontalAlignment="Right"
                                                VerticalAlignment="Center"
                                                FontSize="{StaticResource FontSizeNormal}"
                                                Foreground="{StaticResource HeaderBrush}"
                                                Text="{x:Bind MessageTime, Mode=OneWay, Converter={StaticResource StringToFormat}, ConverterParameter='{}{0:ddd, dd MMM yyyy – hh:mm:ss tt}'}"
                                                TextWrapping="NoWrap" />
                                        </Grid>
                                        <TextBlock
                                            Grid.Row="1"
                                            Margin="2"
                                            HorizontalAlignment="Left"
                                            VerticalAlignment="Center"
                                            FontSize="{StaticResource FontSizeNormal}"
                                            Foreground="{StaticResource SecondaryBrush}"
                                            Text="{x:Bind MessageText, Mode=OneWay}"
                                            TextWrapping="Wrap" />
                                    </Grid>
                                </DataTemplate>
                            </ListView.ItemTemplate>
                        </ListView>

                    </Grid>
                </ScrollViewer>
            </TabViewItem>

            <!--  3rd Tab  -->
            <TabViewItem
                x:Name="tvi3"
                Header="Available"
                IsClosable="False">
                <TabViewItem.IconSource>
                    <FontIconSource Glyph="{StaticResource AllApps}" />
                </TabViewItem.IconSource>
                <ScrollViewer VerticalScrollMode="Auto">
                    <Grid>
                        <Grid.RowDefinitions>
                            <RowDefinition Height="Auto" />
                            <RowDefinition Height="*" />
                        </Grid.RowDefinitions>
                        <TextBlock
                            Grid.Row="0"
                            Margin="16,13"
                            FontSize="{StaticResource FontSizeLarge}"
                            Text="Connection History" />
                        <ListView
                            x:Name="lvTab3Messages"
                            Grid.Row="1"
                            Margin="0,0,10,0"
                            HorizontalAlignment="Stretch"
                            VerticalAlignment="Stretch"
                            Background="Transparent"
                            Opacity="1">
                            <!--
                            <ListView.ItemsPanel>
                                <ItemsPanelTemplate>
                                    <WrapGrid HorizontalChildrenAlignment="Left" Orientation="Horizontal" />
                                </ItemsPanelTemplate>
                            </ListView.ItemsPanel>
                            -->
                            <ListView.Transitions>
                                <TransitionCollection>
                                    <EdgeUIThemeTransition />
                                </TransitionCollection>
                            </ListView.Transitions>
                            <ListView.ItemTemplate>
                                <DataTemplate x:DataType="local:ApplicationMessage">
                                    <Grid
                                        Margin="0,3,0,3"
                                        PointerMoved="UIElement_PointerMoved"
                                        PointerPressed="UIElement_PointerPressed"
                                        PointerReleased="UIElement_PointerReleased">
                                        <Grid.RowDefinitions>
                                            <RowDefinition />
                                            <RowDefinition />
                                        </Grid.RowDefinitions>
                                        <Grid Grid.Row="0">
                                            <Grid.ColumnDefinitions>
                                                <ColumnDefinition Width="Auto" />
                                                <ColumnDefinition Width="*" />
                                            </Grid.ColumnDefinitions>
                                            <ctrl:CompShadow
                                                Grid.Column="0"
                                                Margin="2,2,4,2"
                                                HorizontalAlignment="Left"
                                                VerticalAlignment="Center"
                                                BlurRadius="1"
                                                OffsetX="1"
                                                OffsetY="1"
                                                ShadowOpacity="0.9"
                                                Color="{StaticResource TitleShadow}">
                                                <TextBlock
                                                    FontSize="{StaticResource FontSizeMedium}"
                                                    Foreground="{StaticResource PrimaryBrush}"
                                                    Text="{x:Bind Module, Mode=OneWay}"
                                                    TextWrapping="NoWrap" />
                                            </ctrl:CompShadow>
                                            <TextBlock
                                                Grid.Column="1"
                                                Margin="4,2,2,2"
                                                HorizontalAlignment="Right"
                                                VerticalAlignment="Center"
                                                FontSize="{StaticResource FontSizeNormal}"
                                                Foreground="{StaticResource HeaderBrush}"
                                                Text="{x:Bind MessageTime, Mode=OneWay, Converter={StaticResource StringToFormat}, ConverterParameter='{}{0:ddd, dd MMM yyyy – hh:mm:ss tt}'}"
                                                TextWrapping="NoWrap" />
                                        </Grid>
                                        <TextBlock
                                            Grid.Row="1"
                                            Margin="2"
                                            HorizontalAlignment="Left"
                                            VerticalAlignment="Center"
                                            FontSize="{StaticResource FontSizeNormal}"
                                            Foreground="{StaticResource SecondaryBrush}"
                                            Text="{x:Bind MessageText, Mode=OneWay}"
                                            TextWrapping="Wrap" />
                                    </Grid>
                                </DataTemplate>
                            </ListView.ItemTemplate>
                        </ListView>
                    </Grid>
                </ScrollViewer>
            </TabViewItem>
        </TabView>
        <!--#endregion-->

        <!--#region [SlideBar]-->
        <StackPanel Margin="-5,0,-5,-5" VerticalAlignment="Bottom">
            <!--
                Wrap this in a StackPanel/Grid to support AnimateUIElementOffset
                This is my "new & improved" version of the original AutoCloseInfoBar.
            -->
            <ctrl:SlideBar
                x:Name="infoBar"
                AutoCloseInterval="8000"
                Background="{StaticResource GradientBarBrush}"
                Foreground="{StaticResource PrimaryBrush}"
                Severity="Informational"
                SlideUp="True" />
        </StackPanel>
        <!--#endregion-->

    </Grid>

</Page>
